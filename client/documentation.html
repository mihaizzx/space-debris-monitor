<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üìö Documentation - Space Debris Tracker</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cesium@1.122/Build/Cesium/Widgets/widgets.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 50%, #2a1f3a 100%);
      color: #e0e0e0;
      line-height: 1.6;
    }

    .header {
      background: rgba(10, 14, 39, 0.95);
      border-bottom: 2px solid #4a90e2;
      padding: 20px;
      position: sticky;
      top: 0;
      z-index: 1000;
      backdrop-filter: blur(10px);
    }

    .header-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .header h1 {
      color: #4a90e2;
      font-size: 28px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .nav-links {
      display: flex;
      gap: 20px;
    }

    .nav-links a {
      color: #4a90e2;
      text-decoration: none;
      padding: 8px 16px;
      border-radius: 5px;
      transition: all 0.3s;
      border: 1px solid transparent;
    }

    .nav-links a:hover {
      background: rgba(74, 144, 226, 0.2);
      border-color: #4a90e2;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    .section {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 10px;
      padding: 30px;
      margin-bottom: 30px;
      border: 1px solid rgba(74, 144, 226, 0.3);
      backdrop-filter: blur(5px);
    }

    .section h2 {
      color: #4a90e2;
      font-size: 24px;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 2px solid rgba(74, 144, 226, 0.5);
    }

    .section h3 {
      color: #6ab7ff;
      font-size: 20px;
      margin-top: 25px;
      margin-bottom: 15px;
    }

    .api-card {
      background: rgba(74, 144, 226, 0.1);
      border-left: 4px solid #4a90e2;
      padding: 20px;
      margin: 15px 0;
      border-radius: 5px;
    }

    .api-card h4 {
      color: #4a90e2;
      font-size: 18px;
      margin-bottom: 10px;
    }

    .api-endpoint {
      background: rgba(0, 0, 0, 0.3);
      padding: 10px 15px;
      border-radius: 5px;
      font-family: 'Courier New', monospace;
      color: #7fff7f;
      margin: 10px 0;
      overflow-x: auto;
    }

    .math-formula {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 215, 0, 0.3);
      border-left: 4px solid #ffd700;
      padding: 20px;
      margin: 15px 0;
      border-radius: 5px;
      font-family: 'Courier New', monospace;
      overflow-x: auto;
    }

    .math-formula h4 {
      color: #ffd700;
      font-size: 16px;
      margin-bottom: 10px;
      font-family: 'Segoe UI', sans-serif;
    }

    .formula-text {
      color: #ffeb3b;
      font-size: 16px;
      line-height: 1.8;
      margin: 10px 0;
    }

    .step-list {
      counter-reset: step-counter;
      list-style: none;
      padding-left: 0;
    }

    .step-list li {
      counter-increment: step-counter;
      margin: 15px 0;
      padding-left: 40px;
      position: relative;
    }

    .step-list li::before {
      content: counter(step-counter);
      position: absolute;
      left: 0;
      top: 0;
      background: #4a90e2;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }

    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }

    .feature-card {
      background: rgba(74, 144, 226, 0.1);
      border: 1px solid rgba(74, 144, 226, 0.3);
      border-radius: 8px;
      padding: 20px;
      transition: transform 0.3s;
    }

    .feature-card:hover {
      transform: translateY(-5px);
      border-color: #4a90e2;
    }

    .feature-card h4 {
      color: #4a90e2;
      margin-bottom: 10px;
      font-size: 18px;
    }

    .warning-box {
      background: rgba(255, 152, 0, 0.1);
      border-left: 4px solid #ff9800;
      padding: 15px;
      margin: 15px 0;
      border-radius: 5px;
    }

    .info-box {
      background: rgba(33, 150, 243, 0.1);
      border-left: 4px solid #2196f3;
      padding: 15px;
      margin: 15px 0;
      border-radius: 5px;
    }

    .success-box {
      background: rgba(76, 175, 80, 0.1);
      border-left: 4px solid #4caf50;
      padding: 15px;
      margin: 15px 0;
      border-radius: 5px;
    }

    code {
      background: rgba(0, 0, 0, 0.3);
      padding: 2px 6px;
      border-radius: 3px;
      color: #7fff7f;
      font-family: 'Courier New', monospace;
    }

    .table-container {
      overflow-x: auto;
      margin: 20px 0;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background: rgba(255, 255, 255, 0.05);
    }

    th, td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid rgba(74, 144, 226, 0.2);
    }

    th {
      background: rgba(74, 144, 226, 0.2);
      color: #4a90e2;
      font-weight: bold;
    }

    tr:hover {
      background: rgba(74, 144, 226, 0.1);
    }

    .toc {
      background: rgba(74, 144, 226, 0.1);
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 30px;
    }

    .toc h3 {
      color: #4a90e2;
      margin-bottom: 15px;
    }

    .toc ul {
      list-style: none;
      padding-left: 0;
    }

    .toc li {
      margin: 8px 0;
    }

    .toc a {
      color: #6ab7ff;
      text-decoration: none;
      transition: color 0.3s;
    }

    .toc a:hover {
      color: #4a90e2;
      text-decoration: underline;
    }

    .button-link {
      display: inline-block;
      background: #4a90e2;
      color: white;
      padding: 10px 20px;
      border-radius: 5px;
      text-decoration: none;
      transition: background 0.3s;
      margin: 10px 5px;
    }

    .button-link:hover {
      background: #357abd;
    }

    @media (max-width: 768px) {
      .header-content {
        flex-direction: column;
        gap: 15px;
      }

      .nav-links {
        flex-direction: column;
        width: 100%;
      }

      .feature-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="header-content">
      <h1>üìö Space Debris Tracker - Documentation</h1>
      <nav class="nav-links">
        <a href="/">üè† Home</a>
        <a href="#guide">üìñ Guide</a>
        <a href="#apis">üîó APIs</a>
        <a href="#math">üìê Math</a>
      </nav>
    </div>
  </div>

  <div class="container">
    <!-- Table of Contents -->
    <div class="toc">
      <h3>üìã Cuprins / Table of Contents</h3>
      <ul>
        <li><a href="#overview">üåç Prezentare GeneralƒÉ</a></li>
        <li><a href="#guide">üìñ Ghid de Utilizare</a></li>
        <li><a href="#features">‚ú® Func»õionalitƒÉ»õi</a></li>
        <li><a href="#apis">üîó API-uri NASA</a></li>
        <li><a href="#math">üìê Calcule Matematice</a></li>
        <li><a href="#technical">‚öôÔ∏è Detalii Tehnice</a></li>
      </ul>
    </div>

    <!-- Overview Section -->
    <div class="section" id="overview">
      <h2>üåç General Overview</h2>
      <p>
        <strong>Space Debris Tracker</strong> is an advanced web application for monitoring and analyzing space debris in Earth's orbit. 
        It uses real data from NASA and SGP4 orbital propagation algorithms to provide accurate 3D visualization of satellites and space debris.
      </p>
      
      <div class="info-box">
        <strong>üéØ Purpose:</strong> To provide everyone with access to critical data about space debris and help understand the risks associated with orbital objects.
      </div>

      <h3>üöÄ Technologies Used</h3>
      <div class="feature-grid">
        <div class="feature-card">
          <h4>üåê Frontend</h4>
          <ul>
            <li><strong>Cesium.js 1.122</strong> - 3D Visualization</li>
            <li><strong>JavaScript ES6+</strong> - Application Logic</li>
            <li><strong>HTML5/CSS3</strong> - Modern Interface</li>
          </ul>
        </div>
        <div class="feature-card">
          <h4>üîß Backend</h4>
          <ul>
            <li><strong>FastAPI (Python)</strong> - REST API</li>
            <li><strong>Skyfield</strong> - SGP4 Propagation</li>
            <li><strong>NumPy</strong> - Scientific Computing</li>
          </ul>
        </div>
        <div class="feature-card">
          <h4>üìä Data Sources</h4>
          <ul>
            <li><strong>CelesTrak</strong> - TLE Data</li>
            <li><strong>NASA ORDEM</strong> - Debris Flux</li>
            <li><strong>Space-Track.org</strong> - Objects Catalog</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- User Guide Section -->
    <div class="section" id="guide">
      <h2>üìñ Complete User Guide</h2>
      
      <h3>üé¨ Initial Steps</h3>
      <ol class="step-list">
        <li>
          <strong>Load TLE Data</strong><br>
          Click the <code>üì° Load TLE Data</code> button in the sidebar to download the latest data from CelesTrak.
          <div class="info-box" style="margin-top: 10px;">
            <strong>Available options:</strong>
            <ul>
              <li>üõ∞Ô∏è Active Satellites - Active satellites (~3000 objects)</li>
              <li>üå¶Ô∏è Weather Satellites - Weather satellites</li>
              <li>üì° Communications - Communications satellites</li>
              <li>üî≠ Science - Scientific satellites</li>
              <li>üåç Earth Observation - Earth Observation</li>
            </ul>
          </div>
        </li>

        <li>
          <strong>Visualize Satellites</strong><br>
          Select the visualization type from the <code>üõ∞Ô∏è Visualize Satellites</code> dropdown:
          <ul style="margin-top: 10px;">
            <li><strong>üåê All Satellites</strong> - All satellites (mixed LEO + Non-LEO)</li>
            <li><strong>üåç LEO Satellites</strong> - LEO satellites only (&lt;2000km)</li>
            <li><strong>üåå Non-LEO Satellites</strong> - MEO/GEO satellites (&gt;2000km)</li>
            <li><strong>üî¥ Toggle LEO Boundary</strong> - Display LEO boundary</li>
          </ul>
        </li>

        <li>
          <strong>Configure Settings</strong><br>
          After selecting the type, a panel with options appears:
          <ul style="margin-top: 10px;">
            <li><strong>Number of satellites:</strong> How many satellites to display (5-100)</li>
            <li><strong>‚òëÔ∏è Show with real SGP4 orbits:</strong> Display animated trajectories (slower)</li>
          </ul>
          <div class="warning-box" style="margin-top: 10px;">
            ‚ö†Ô∏è Visualization with real orbits can take 10-30 seconds for many satellites!
          </div>
        </li>

        <li>
          <strong>Click "üëÅÔ∏è Visualize Selected"</strong><br>
          Satellites will appear on the globe with distinctive colors:
          <ul style="margin-top: 10px;">
            <li><strong style="color: #00ffff;">üåà Rainbow</strong> - All Satellites (colored gradient)</li>
            <li><strong style="color: #00ffff;">üåä AQUA</strong> - LEO Satellites (bright blue-green)</li>
            <li><strong style="color: #ff8c00;">üü† DARKORANGE</strong> - Non-LEO Satellites (orange + yellow)</li>
          </ul>
        </li>

        <li>
          <strong>Interact with the 3D Globe</strong><br>
          <ul style="margin-top: 10px;">
            <li><strong>Left click + drag:</strong> Rotate the globe</li>
            <li><strong>Scroll:</strong> Zoom in/out</li>
            <li><strong>Right click + drag:</strong> Pan (move camera)</li>
            <li><strong>Click on satellite:</strong> Display details (NORAD ID, altitude, velocity)</li>
          </ul>
        </li>
      </ol>

      <h3>üö® Advanced Features</h3>
      
      <h4>üìç Orbital Propagation (SGP4)</h4>
      <p>
        Select a satellite from the dropdown and click <code>üåç Propagate Orbit</code> to visualize the precise trajectory calculated with NASA's SGP4 algorithm.
      </p>
      <div class="info-box">
        <strong>‚è±Ô∏è Parameters:</strong>
        <ul>
          <li><strong>Minutes:</strong> Propagation duration (default: 120 minutes = 2 hours)</li>
          <li><strong>Step (seconds):</strong> Interval between points (default: 60s)</li>
        </ul>
      </div>

      <h4>‚ö†Ô∏è NASA ORDEM Risk Zones</h4>
      <p>
        Click <code>üö® NASA Risk Zones</code> to display 5 risk zones based on NASA ORDEM (Orbital Debris Engineering Model) data:
      </p>
      <ul>
        <li><strong style="color: #ff0000;">üî¥ CRITICAL</strong> - 400 km (Lower LEO - ISS)</li>
        <li><strong style="color: #ff4500;">üü† VERY HIGH</strong> - 800 km (Mid LEO - Iridium)</li>
        <li><strong style="color: #ffa500;">üü° HIGH</strong> - 1400 km (Upper LEO - Earth observation)</li>
        <li><strong style="color: #ffff00;">üü¢ MODERATE</strong> - 20200 km (MEO - GPS)</li>
        <li><strong style="color: #90ee90;">üîµ ELEVATED</strong> - 35786 km (GEO - Communications)</li>
      </ul>
      <div class="success-box">
        <strong>üí° Tip:</strong> Click on the first point of each orbit to see the complete NASA ORDEM data for that zone!
      </div>

      <h4>üéØ Impact Prediction</h4>
      <ol style="margin-top: 10px;">
        <li>Select a satellite from the dropdown</li>
        <li>Click <code>üéØ Predict Impact</code></li>
        <li>You will receive:
          <ul>
            <li>Current satellite position</li>
            <li>Total number of tracked debris (300)</li>
            <li>Nearby debris (2000 km radius)</li>
            <li>Top 5 debris with collision risk</li>
            <li>Calculated collision probabilities</li>
            <li>Distances and relative velocities</li>
          </ul>
        </li>
      </ol>

      <h4>üìä Custom Risk Analysis</h4>
      <p>Calculate collision probability for your satellite:</p>
      <ol style="margin-top: 10px;">
        <li>Enter parameters:
          <ul>
            <li><strong>Area m¬≤:</strong> Satellite surface area (e.g., 10 m¬≤)</li>
            <li><strong>Days:</strong> Analysis period (e.g., 365 days = 1 year)</li>
            <li><strong>Min/Max cm:</strong> Debris size (e.g., 1-10 cm)</li>
          </ul>
        </li>
        <li>Select a satellite from the dropdown (to get altitude)</li>
        <li>Click <code>‚ö†Ô∏è Risk Analysis</code></li>
        <li>The result will display:
          <ul>
            <li>Average debris flux (impacts/m¬≤/year)</li>
            <li>Annual collision probability</li>
            <li>Cumulative risk for selected period</li>
          </ul>
        </li>
      </ol>

      <h4>‚òÄÔ∏è Space Weather</h4>
      <p>
        Click <code>‚òÄÔ∏è Space Weather</code> to get recent solar events from NASA DONKI API:
      </p>
      <ul>
        <li><strong>CME</strong> - Coronal Mass Ejections</li>
        <li><strong>Solar Flares</strong> - Solar eruptions</li>
        <li><strong>Geomagnetic Storms</strong> - Geomagnetic storms</li>
      </ul>
      <div class="warning-box">
        ‚ö†Ô∏è Space weather can affect satellites through radio interference, solar panel degradation, and increased atmospheric drag!
      </div>

      <h4>üîç Image Classification (ML)</h4>
      <p>
        Upload an image with satellites or space debris for automatic classification (demonstrative functionality).
      </p>
    </div>

    <!-- Features Section -->
    <div class="section" id="features">
      <h2>‚ú® Complete Features</h2>
      
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Feature</th>
              <th>Description</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>üì° TLE Loading</td>
              <td>Download TLE data from CelesTrak (6 categories)</td>
              <td>‚úÖ Functional</td>
            </tr>
            <tr>
              <td>üåê 3D Visualization</td>
              <td>Display satellites on Cesium globe with distinctive colors</td>
              <td>‚úÖ Functional</td>
            </tr>
            <tr>
              <td>üõ∞Ô∏è SGP4 Propagation</td>
              <td>Calculate precise trajectories using NASA algorithm</td>
              <td>‚úÖ Functional</td>
            </tr>
            <tr>
              <td>üé¨ Orbit Animation</td>
              <td>60x time-lapse animation with SampledPositionProperty</td>
              <td>‚úÖ Functional</td>
            </tr>
            <tr>
              <td>üö® NASA Risk Zones</td>
              <td>5 zones based on NASA ORDEM with real flux</td>
              <td>‚úÖ Functional</td>
            </tr>
            <tr>
              <td>üéØ Impact Prediction</td>
              <td>Collision analysis with top 5 dangerous debris</td>
              <td>‚úÖ Functional</td>
            </tr>
            <tr>
              <td>‚ö†Ô∏è Risk Analysis</td>
              <td>Custom probability calculations</td>
              <td>‚úÖ Functional</td>
            </tr>
            <tr>
              <td>‚òÄÔ∏è Space Weather</td>
              <td>NASA DONKI data (CME, solar flares)</td>
              <td>‚úÖ Functional</td>
            </tr>
            <tr>
              <td>üîç ML Classification</td>
              <td>Machine learning for satellite images</td>
              <td>üöß Demo</td>
            </tr>
            <tr>
              <td>üî¥ LEO Boundary</td>
              <td>LEO boundary sphere visualization (2000km)</td>
              <td>üîÑ In development</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- NASA APIs Section -->
    <div class="section" id="apis">
      <h2>üîó NASA APIs Used</h2>
      
      <div class="api-card">
        <h4>1. üõ∞Ô∏è CelesTrak TLE Data API</h4>
        <p><strong>Purpose:</strong> Provides Two-Line Element (TLE) sets for all tracked orbital objects.</p>
        <div class="api-endpoint">
GET https://celestrak.org/NORAD/elements/gp.php?GROUP={group}&FORMAT=tle
        </div>
        <p><strong>Parameters:</strong></p>
        <ul>
          <li><code>GROUP</code> - Satellite category (active, weather, communications, etc.)</li>
          <li><code>FORMAT</code> - Response format (tle, json, xml)</li>
        </ul>
        <p><strong>Response:</strong> TLE format text (3 lines per satellite: name, line 1, line 2)</p>
        <div class="info-box">
          <strong>üìö TLE Format:</strong><br>
          Line 1: Catalog number, classification, epoch, motion derivatives<br>
          Line 2: Inclination, right ascension, eccentricity, argument of perigee, mean anomaly, mean motion
        </div>
      </div>

      <div class="api-card">
        <h4>2. üåå NASA ORDEM (Orbital Debris Engineering Model)</h4>
        <p><strong>Purpose:</strong> Statistical model for space debris flux based on altitude and size.</p>
        <div class="api-endpoint">
# Model embedded in application (not external API)
# Data from NASA ORDEM 3.1 Technical Report
        </div>
        <p><strong>Model Parameters:</strong></p>
        <ul>
          <li><code>altitude_km</code> - Orbit altitude (200-50000 km)</li>
          <li><code>inclination_deg</code> - Orbital inclination (0-180¬∞)</li>
          <li><code>size_min_cm</code> - Minimum debris size</li>
          <li><code>size_max_cm</code> - Maximum debris size</li>
        </ul>
        <p><strong>Output:</strong> Flux (impacts/m¬≤/year) for each size range</p>
        <div class="success-box">
          <strong>üéØ Identified Risk Zones:</strong>
          <ul>
            <li><strong>400 km</strong> - Lower LEO (ISS, Hubble) - Flux: 1.2e-4 impacts/m¬≤/year</li>
            <li><strong>800 km</strong> - Mid LEO (Iridium) - Flux: 5.8e-5 impacts/m¬≤/year</li>
            <li><strong>1400 km</strong> - Upper LEO - Flux: 3.2e-5 impacts/m¬≤/year</li>
            <li><strong>20200 km</strong> - MEO (GPS, Galileo) - Flux: 1.5e-6 impacts/m¬≤/year</li>
            <li><strong>35786 km</strong> - GEO (Communications) - Flux: 8.7e-7 impacts/m¬≤/year</li>
          </ul>
        </div>
      </div>

      <div class="api-card">
        <h4>3. ‚òÄÔ∏è NASA DONKI (Space Weather Database)</h4>
        <p><strong>Purpose:</strong> Information about solar events and their impact on Earth.</p>
        <div class="api-endpoint">
GET https://api.nasa.gov/DONKI/CME?startDate={date}&api_key={key}
GET https://api.nasa.gov/DONKI/FLR?startDate={date}&api_key={key}
GET https://api.nasa.gov/DONKI/GST?startDate={date}&api_key={key}
        </div>
        <p><strong>Endpoints:</strong></p>
        <ul>
          <li><code>/CME</code> - Coronal Mass Ejections</li>
          <li><code>/FLR</code> - Solar Flares</li>
          <li><code>/GST</code> - Geomagnetic Storms</li>
          <li><code>/IPS</code> - Interplanetary Shocks</li>
        </ul>
        <p><strong>Response:</strong> JSON with date, intensity, duration and predicted impact</p>
        <div class="warning-box">
          <strong>‚ö†Ô∏è Impact on satellites:</strong>
          <ul>
            <li>Strong CMEs can damage satellite electronics</li>
            <li>Solar flares cause radio and GPS interference</li>
            <li>Geomagnetic storms increase atmospheric drag ‚Üí orbital decay</li>
          </ul>
        </div>
      </div>

      <div class="api-card">
        <h4>4. üåç Space-Track.org API</h4>
        <p><strong>Purpose:</strong> Official US Space Command catalog with precise data about all space objects.</p>
        <div class="api-endpoint">
POST https://www.space-track.org/ajaxauth/login
GET https://www.space-track.org/basicspacedata/query/class/gp/NORAD_CAT_ID/{id}
        </div>
        <p><strong>Authentication:</strong> Requires free account + login with credentials</p>
        <p><strong>Available data:</strong></p>
        <ul>
          <li>General Perturbations (GP) - TLE data</li>
          <li>Satellite Catalog - Complete metadata</li>
          <li>Decay predictions - Reentry predictions</li>
          <li>Launch site - Launch information</li>
        </ul>
      </div>

      <div class="api-card">
        <h4>5. üî≠ Skyfield (SGP4 Propagator)</h4>
        <p><strong>Purpose:</strong> Python library for precise astronomical calculations, including SGP4 propagation.</p>
        <div class="api-endpoint">
from skyfield.api import EarthSatellite, load, wgs84, utc
ts = load.timescale()
sat = EarthSatellite(line1, line2, name, ts)
geocentric = sat.at(t)
        </div>
        <p><strong>Features:</strong></p>
        <ul>
          <li><strong>SGP4 Propagation:</strong> Calculate satellite positions from TLE</li>
          <li><strong>Coordinate Transformations:</strong> Geocentric ‚Üí Geodetic (lat/lon/alt)</li>
          <li><strong>Time Scales:</strong> UTC, TAI, TT for precise synchronization</li>
          <li><strong>Visibility:</strong> Calculate when/where satellites are visible</li>
        </ul>
      </div>
    </div>

    <!-- Mathematical Formulas Section -->
    <div class="section" id="math">
      <h2>üìê Mathematical Calculations and Formulas</h2>
      
      <div class="math-formula">
        <h4>1. üõ∞Ô∏è SGP4 Orbital Propagation (Simplified General Perturbations)</h4>
        <p>The SGP4 algorithm propagates satellite position from TLE data, taking into account gravitational and atmospheric perturbations.</p>
        <div class="formula-text">
<strong>Satellite position at time t:</strong>

r(t) = [x(t), y(t), z(t)]  # 3D position vector

<strong>Calculated through:</strong>
1. Extract orbital parameters from TLE (a, e, i, Œ©, œâ, M‚ÇÄ)
2. Calculate mean anomaly M(t) = M‚ÇÄ + n¬∑(t - t‚ÇÄ)
3. Solve Kepler's equation: M = E - e¬∑sin(E)
4. Convert to Cartesian coordinates:
   x = a¬∑(cos(E) - e)
   y = a¬∑‚àö(1 - e¬≤)¬∑sin(E)
5. Rotations for inclination and right ascension
6. Adjustments for perturbations (J‚ÇÇ, J‚ÇÉ, J‚ÇÑ, atmospheric drag)

<strong>TLE Parameters:</strong>
‚Ä¢ a  = semi-major axis (km)
‚Ä¢ e  = eccentricity (0-1)
‚Ä¢ i  = inclination (degrees)
‚Ä¢ Œ©  = right ascension of ascending node (degrees)
‚Ä¢ œâ  = argument of perigee (degrees)
‚Ä¢ M‚ÇÄ = mean anomaly at epoch (degrees)
‚Ä¢ n  = mean motion (revolutions/day)
        </div>
      </div>

      <div class="math-formula">
        <h4>2. üéØ Collision Probability Calculation</h4>
        <p>The probability that a satellite will collide with space debris in a given period.</p>
        <div class="formula-text">
<strong>Annual collision probability:</strong>

P_annual = 1 - exp(-F √ó A √ó T)

Where:
‚Ä¢ F = debris flux (impacts/m¬≤/year) [from NASA ORDEM]
‚Ä¢ A = satellite surface area (m¬≤)
‚Ä¢ T = time period (years)

<strong>Simplified ORDEM flux:</strong>

F(h, i, s) = F‚ÇÄ √ó f_altitude(h) √ó f_inclination(i) √ó f_size(s)

Where:
‚Ä¢ h = altitude (km)
‚Ä¢ i = inclination (degrees)
‚Ä¢ s = debris size (cm)

<strong>Altitude factor (empirical):</strong>

f_altitude(h) = {
  exp(-|h - 400|/200)     if h < 1000 km (LEO)
  exp(-|h - 800|/300)     if 1000 < h < 2000 km
  1 / (h/1000)¬≤          if h > 2000 km (MEO/GEO)
}

<strong>Inclination factor:</strong>

f_inclination(i) = 1 + 0.3 √ó sin(2 √ó i √ó œÄ/180)
  # Maximum risk at ~52¬∞ and ~98¬∞ (polar/retrograde orbits)

<strong>Numerical example:</strong>
ISS: A = 10 m¬≤, h = 400 km, i = 51.6¬∞, T = 1 year
F ‚âà 1.2e-4 impacts/m¬≤/year (from ORDEM)
P_annual = 1 - exp(-1.2e-4 √ó 10 √ó 1) ‚âà 0.0012 = 0.12%
        </div>
      </div>

      <div class="math-formula">
        <h4>3. üìè 3D Distance Calculation (Euclidean Space)</h4>
        <p>Distance in 3D space between satellite and debris using Cartesian coordinates.</p>
        <div class="formula-text">
<strong>Spherical to Cartesian coordinate conversion:</strong>

For a point at (lat, lon, alt):

R = R_earth + alt  # Total radius from Earth's center
x = R √ó cos(lat) √ó cos(lon)
y = R √ó cos(lat) √ó sin(lon)
z = R √ó sin(lat)

Where R_earth = 6371 km (mean Earth radius)

<strong>Euclidean distance:</strong>

d = ‚àö[(x‚ÇÅ - x‚ÇÇ)¬≤ + (y‚ÇÅ - y‚ÇÇ)¬≤ + (z‚ÇÅ - z‚ÇÇ)¬≤]

<strong>Numerical example:</strong>
Satellite 1: lat=0¬∞, lon=0¬∞, alt=400 km
  ‚Üí x‚ÇÅ = 6771 km, y‚ÇÅ = 0 km, z‚ÇÅ = 0 km

Debris: lat=0¬∞, lon=5¬∞, alt=420 km
  ‚Üí x‚ÇÇ ‚âà 6751 km, y‚ÇÇ ‚âà 590 km, z‚ÇÇ = 0 km

d = ‚àö[(6771-6751)¬≤ + (0-590)¬≤ + 0¬≤] 
  = ‚àö[400 + 348100] ‚âà 590.3 km
        </div>
      </div>

      <div class="math-formula">
        <h4>4. üåç Orbital Velocity Calculation</h4>
        <p>Orbital velocity of a satellite at a given altitude.</p>
        <div class="formula-text">
<strong>Circular orbital velocity formula:</strong>

v = ‚àö(Œº / r)

Where:
‚Ä¢ Œº = GM_earth = 398600 km¬≥/s¬≤ (standard gravitational parameter)
‚Ä¢ r = R_earth + altitude (total orbital radius)

<strong>For elliptical orbits:</strong>

v = ‚àö[Œº √ó (2/r - 1/a)]

Where:
‚Ä¢ a = semi-major axis
‚Ä¢ r = current radius

<strong>Relative velocity between two objects:</strong>

v_rel = |v‚ÇÅ - v‚ÇÇ| (approximate, for nearby orbits)

v_rel_real = ‚àö[(v‚ÇÅ‚Çì - v‚ÇÇ‚Çì)¬≤ + (v‚ÇÅ·µß - v‚ÇÇ·µß)¬≤ + (v‚ÇÅ·µ§ - v‚ÇÇ·µ§)¬≤]

<strong>Numerical examples:</strong>

ISS (h = 400 km):
v = ‚àö(398600 / 6771) ‚âà 7.67 km/s ‚âà 27,600 km/h

GPS (h = 20,200 km):
v = ‚àö(398600 / 26571) ‚âà 3.87 km/s ‚âà 13,900 km/h

GEO (h = 35,786 km):
v = ‚àö(398600 / 42157) ‚âà 3.07 km/s ‚âà 11,000 km/h
        </div>
      </div>

      <div class="math-formula">
        <h4>5. ‚è±Ô∏è Orbital Period</h4>
        <p>Time required for a satellite to complete one revolution.</p>
        <div class="formula-text">
<strong>Kepler's formula for orbital period:</strong>

T = 2œÄ √ó ‚àö(a¬≥ / Œº)

Where:
‚Ä¢ T = period (seconds)
‚Ä¢ a = semi-major axis (km)
‚Ä¢ Œº = 398600 km¬≥/s¬≤

<strong>Simplified for circular orbits:</strong>

T = 2œÄ √ó ‚àö(r¬≥ / Œº)

Where r = R_earth + altitude

<strong>Number of orbits per day:</strong>

n = 86400 / T  (revolutions/day)

<strong>Numerical examples:</strong>

ISS (h = 400 km, r = 6771 km):
T = 2œÄ √ó ‚àö(6771¬≥ / 398600) ‚âà 5531 s ‚âà 92.2 min
n ‚âà 15.6 orbits/day

GPS (h = 20,200 km, r = 26571 km):
T = 2œÄ √ó ‚àö(26571¬≥ / 398600) ‚âà 43,082 s ‚âà 11.97 hours
n ‚âà 2 orbits/day

GEO (h = 35,786 km, r = 42157 km):
T = 2œÄ √ó ‚àö(42157¬≥ / 398600) ‚âà 86,164 s ‚âà 23.93 hours
n ‚âà 1 orbit/day (synchronous with Earth's rotation!)
        </div>
      </div>

      <div class="math-formula">
        <h4>6. üé¢ Risk Factor Calculation</h4>
        <p>Combining distance and relative velocity to assess collision risk.</p>
        <div class="formula-text">
<strong>Combined risk factor:</strong>

Risk = w_dist √ó f_distance + w_vel √ó f_velocity

Where:
‚Ä¢ w_dist = 0.7 (distance weight)
‚Ä¢ w_vel = 0.3 (velocity weight)

<strong>Normalized distance factor:</strong>

f_distance = max(0, (d_max - d) / d_max)

Where:
‚Ä¢ d = current distance (km)
‚Ä¢ d_max = maximum search radius (e.g., 2000 km)

Values: 1.0 (very close) ‚Üí 0.0 (far away)

<strong>Normalized velocity factor:</strong>

f_velocity = min(1, v_rel / v_max)

Where:
‚Ä¢ v_rel = relative velocity (km/s)
‚Ä¢ v_max = 10 km/s (typical maximum velocity)

Values: 0.0 (stationary) ‚Üí 1.0 (maximum frontal impact)

<strong>Risk interpretation:</strong>
‚Ä¢ Risk > 0.8: üî¥ CRITICAL (extremely high risk)
‚Ä¢ 0.6 < Risk ‚â§ 0.8: üü† HIGH (high risk)
‚Ä¢ 0.4 < Risk ‚â§ 0.6: üü° MODERATE (medium risk)
‚Ä¢ 0.2 < Risk ‚â§ 0.4: üü¢ LOW (low risk)
‚Ä¢ Risk ‚â§ 0.2: ‚ö™ MINIMAL (negligible risk)

<strong>Numerical example:</strong>
Debris at d = 25 km, v_rel = 12 km/s, d_max = 2000 km:

f_distance = (2000 - 25) / 2000 = 0.9875
f_velocity = min(1, 12/10) = 1.0

Risk = 0.7 √ó 0.9875 + 0.3 √ó 1.0 
     = 0.691 + 0.3 = 0.991 ‚Üí üî¥ CRITICAL!
        </div>
      </div>
    </div>

    <!-- Technical Details Section -->
    <div class="section" id="technical">
      <h2>‚öôÔ∏è Technical Implementation Details</h2>
      
      <h3>üèóÔ∏è Application Architecture</h3>
      <div class="feature-grid">
        <div class="feature-card">
          <h4>üì¶ Backend API (FastAPI)</h4>
          <ul>
            <li><strong>Port:</strong> 8001</li>
            <li><strong>CORS:</strong> Enabled for localhost</li>
            <li><strong>Endpoints:</strong> 15+ REST endpoints</li>
            <li><strong>Cache:</strong> In-memory TLE store</li>
          </ul>
        </div>
        <div class="feature-card">
          <h4>üåê Frontend (Cesium.js)</h4>
          <ul>
            <li><strong>Port:</strong> 8001 (static files)</li>
            <li><strong>Rendering:</strong> WebGL 3D</li>
            <li><strong>State:</strong> Global AppState object</li>
            <li><strong>Modules:</strong> ES6 imports</li>
          </ul>
        </div>
        <div class="feature-card">
          <h4>üîß Dependencies</h4>
          <ul>
            <li>fastapi==0.104.1</li>
            <li>skyfield==1.46</li>
            <li>numpy==1.24.3</li>
            <li>cesium==1.122 (CDN)</li>
          </ul>
        </div>
      </div>

      <h3>üõ†Ô∏è Main API Endpoints</h3>
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Endpoint</th>
              <th>Method</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>/api/health</code></td>
              <td>GET</td>
              <td>Server status + timestamp</td>
            </tr>
            <tr>
              <td><code>/api/tle/load</code></td>
              <td>POST</td>
              <td>Load TLE from CelesTrak</td>
            </tr>
            <tr>
              <td><code>/api/objects</code></td>
              <td>GET</td>
              <td>List all loaded objects</td>
            </tr>
            <tr>
              <td><code>/api/satellite/details</code></td>
              <td>GET</td>
              <td>Satellite details (NORAD ID)</td>
            </tr>
            <tr>
              <td><code>/api/propagate</code></td>
              <td>GET</td>
              <td>SGP4 orbit propagation</td>
            </tr>
            <tr>
              <td><code>/api/satellite/trajectory/{id}</code></td>
              <td>GET</td>
              <td>Precise SGP4 trajectory</td>
            </tr>
            <tr>
              <td><code>/api/flux</code></td>
              <td>GET</td>
              <td>ORDEM flux for altitude</td>
            </tr>
            <tr>
              <td><code>/api/risk</code></td>
              <td>POST</td>
              <td>Collision risk calculation</td>
            </tr>
            <tr>
              <td><code>/api/risk-zones</code></td>
              <td>GET</td>
              <td>5 NASA ORDEM risk zones</td>
            </tr>
            <tr>
              <td><code>/api/debris/predict-impact</code></td>
              <td>POST</td>
              <td>Impact prediction with debris</td>
            </tr>
            <tr>
              <td><code>/api/donki</code></td>
              <td>GET</td>
              <td>NASA DONKI space weather</td>
            </tr>
          </tbody>
        </table>
      </div>

      <h3>üé® Frontend Module Structure</h3>
      <div class="api-card">
        <h4>File Structure:</h4>
        <div class="api-endpoint">
client/
‚îú‚îÄ‚îÄ index.html              # Main page
‚îú‚îÄ‚îÄ documentation.html      # Documentation page
‚îú‚îÄ‚îÄ app-new.js             # Cesium Manager (3D visualization)
‚îú‚îÄ‚îÄ config.js              # API endpoints configuration
‚îî‚îÄ‚îÄ js/
    ‚îú‚îÄ‚îÄ constants.js       # Constants (colors, limits)
    ‚îú‚îÄ‚îÄ dom-cache.js       # DOM elements cache
    ‚îú‚îÄ‚îÄ error-handler.js   # Error handling
    ‚îú‚îÄ‚îÄ orbital-calculator.js  # Orbital calculations
    ‚îú‚îÄ‚îÄ api-manager.js     # API requests
    ‚îî‚îÄ‚îÄ event-manager.js   # Event delegation
        </div>
      </div>

      <h3>üíæ State Management</h3>
      <div class="api-card">
        <h4>Global AppState Object:</h4>
        <div class="api-endpoint">
AppState = {
  allSatelliteEntities: [],     // Array of Cesium entities for All Satellites
  leoSatelliteEntities: [],     // Array of LEO entities
  nonLeoSatelliteEntities: [],  // Array of Non-LEO entities
  riskZoneEntities: [],         // Array of risk zone entities
  selectedSatellite: null,      // Currently selected satellite
  viewer: null                  // Cesium Viewer instance
}
        </div>
        <p><strong>Cleanup functions:</strong> Each visualization function clears previous entities before adding new ones.</p>
      </div>

      <h3>üé¨ Animation System</h3>
      <div class="math-formula">
        <h4>Cesium Clock Configuration for Animated Orbits:</h4>
        <div class="formula-text">
viewer.clock.startTime = startJulianDate;
viewer.clock.currentTime = startJulianDate;
viewer.clock.stopTime = stopJulianDate;
viewer.clock.clockRange = Cesium.ClockRange.LOOP_STOP;
viewer.clock.multiplier = 60;  // 60x real-time speed
viewer.clock.shouldAnimate = true;

<strong>SampledPositionProperty:</strong>
property = new Cesium.SampledPositionProperty();
property.addSample(julianTime, cartesianPosition);
// Repeat for each trajectory point

entity.position = property;  // Auto-interpolated animation
        </div>
      </div>

      <h3>üé® Visual Hierarchy</h3>
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Category</th>
              <th>Point Size</th>
              <th>Color</th>
              <th>Path Width</th>
              <th>Label Font</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>All Satellites</strong></td>
              <td>10px</td>
              <td>üåà HSL Rainbow</td>
              <td>3px</td>
              <td>bold 11px</td>
            </tr>
            <tr>
              <td><strong>LEO Satellites</strong></td>
              <td>10px</td>
              <td>üåä AQUA</td>
              <td>3px</td>
              <td>bold 11px</td>
            </tr>
            <tr>
              <td><strong>Non-LEO Satellites</strong></td>
              <td>12px</td>
              <td>üü† DARKORANGE + YELLOW</td>
              <td>4px</td>
              <td>bold 12px</td>
            </tr>
            <tr>
              <td><strong>Risk Zones</strong></td>
              <td>6-10px</td>
              <td>üî¥üü†üü°üü¢üîµ (gradient)</td>
              <td>-</td>
              <td>11px bold</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Footer -->
    <div class="section">
      <h2>üöÄ Additional Resources</h2>
      <p>For more information about space debris and orbital safety:</p>
      <div>
        <a href="https://orbitaldebris.jsc.nasa.gov/" target="_blank" class="button-link">üìä NASA Orbital Debris Program</a>
        <a href="https://celestrak.org/" target="_blank" class="button-link">üõ∞Ô∏è CelesTrak</a>
        <a href="https://www.space-track.org/" target="_blank" class="button-link">üåç Space-Track.org</a>
        <a href="https://github.com/skyfielders/python-skyfield" target="_blank" class="button-link">üî≠ Skyfield Documentation</a>
        <a href="https://cesium.com/learn/" target="_blank" class="button-link">üåê Cesium.js Docs</a>
      </div>
      
      <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid rgba(74, 144, 226, 0.3); text-align: center; color: #888;">
        <p>Space Debris Tracker ¬© 2025 | Built with ‚ù§Ô∏è using NASA APIs, Cesium.js & FastAPI</p>
        <p><a href="/" style="color: #4a90e2;">‚Üê Back to Application</a></p>
      </div>
    </div>
  </div>
</body>
</html>